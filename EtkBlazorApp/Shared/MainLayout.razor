@inherits LayoutComponentBase
@inject AuthenticationStateProvider AuthenticationStateProvider
@inject IToastService toastService
@using System.Globalization

<div class="sidebar">
    <NavMenu />
</div>

<div class="main">
    <div class="top-row px-4">
        <AuthorizeView>
            <Authorized>
                <p>
                    <strong>@context.User.Identity.Name</strong>
                    <small style="color: #9e9e9e;">@($"({context.User.Claims.FirstOrDefault(c => c.Type == System.Security.Claims.ClaimTypes.Role).Value})")</small>
                    &nbsp;&nbsp;
                    <a href="/Login" @onclick="LogOut">Выйти</a>
                </p>
            </Authorized>
            <NotAuthorized>
                <a href="/Login">Войти</a>
            </NotAuthorized>
        </AuthorizeView>
    </div>

    <div class="content px-4">
        @Body
    </div>
</div>

<Blazored.Toast.BlazoredToasts Position="Blazored.Toast.Configuration.ToastPosition.TopRight"
                               Timeout="12"
                               IconType="Blazored.Toast.IconType.Material" />

@code {

    decimal usd, euro;
    public async Task LogOut()
    {
        await ((MyCustomAuthProvider)AuthenticationStateProvider).LogOutUser();
    }

    protected override async Task OnInitializedAsync()
    {

    }

}

